---
title: 'Maneja tus formularios en react con un custom hooks'
# mm/dd/yyyy
date: '03-28-2022'
content: 'Manejar tus formularios sin c√≥digo de terceros ya no ser√° un dolor de cabeza'
keywords: 'Custom Hooks React, React, ReactJs, Aprendiendo React F√°cil, Manejo de formularios React'
---

# ü™ùCustom hook para manejo de formularios

![imagen](/custom-hook-form.jpg)

Manejar formularios en react puede ser un dolor de cabeza, si est√°s comenzando lo que quiz√°s te venga a la mente es crear un estado para cada input y solucionar√°s el problema, pero seguro te gustar√≠a hacerlo de una manera mas elegante.

Me gustar√≠a aclarar que, ya existen librer√≠as como [formik](https://formik.org/) (mi preferida) y [react hooks form](https://react-hook-form.com/), que ya resulven muchos de los problemas, sin embargo con el hook que aprenderemos hoy podremos salir de apuros en aplicaciones sencillas.

## useForm o useField

Antes que nada necesitamos ubicarnos en la carpeta hooks de nuestros proyecto, si a√∫n no la tienes creada es momento de hacerlo, dentro de ella creamos un archivo javascript que le pondr√©mos en esta ocasi√≥n useField.

En el vamos crear una funcion que reciba un parametro que podemos llamarlo formFields o formValues como mejor te resulte, adicional crearemos un estado que que como initalState reciba el objeto formFields y nuestro estado estar√° seteado correctamente.

Por ultimo retornaremos nuestro estado del formulario.

```javascript
import { useState } form 'react'
export const useField = ( formFields ) => {

    const [ form, updateForm ] = useState( formFields )

    //algo hermoso pasar√° aqu√≠

    return {
        form
    }
};
```

El par√°metro formField es un objeto con los campos que tendr√° nuestro formulario, al hacerlo de esta manera permitir√° que sea dinamico, y ya veremos c√≥mo gestionar el estado y actualizarlo paso a paso.

Ahora vayamos al componente donde lo usar√©mos y llamar√©mos a nuestro hooks el cual retorna el estado de nuestro formulario, que tiene los campos que le pasaremos al useField, en este caso un objeto con solo dos propiedades, user y password. Vamos destructurar nuestro form y ya podremos acceder f√°cilmente a "user y password" los cuales asociaremos como value de cada uno de los inputs respectivamente.

```javascript
export function MyComponentForm() {
  const { form } = useField({
    user: '',
    password: '',
  });

  const { user, password } = form;

  return (
    <form>
      <input name='user' id='user' value={user} />
      <input name='password' id='password' value={password} />
    </form>
  );
}
```

## Actualizando los campos de nuestro formulario

Hasta este momento si intentamos escribir en nuestro formulario no pasara nada, en realidad nuestro custom hook no esta haciendo nada en este momento, solo esta declarado viendose bonito üòÑ es moento de empezar a actualizar nuestro estado.

Para ello vamos a nuestro archivo useField y dentro empezar√©mos a escribir nuestro manejador de cambios, (le llamaremos as√≠ porque para actualizar el estado usaremos el evento onchage de javascript), recordemos que los eventos de react son sint√©ticos, esto quiere decir que se comportan muy parecido a los de javascript vanilla, pero pueden tener una apariencia diferente. Si tienes curiosidad puedes hacer un console.log del evento que retorna cada funcion "on" en los react element en este caso onChange nos retorna el target entre otras cosas, y dentro de target podemos encontrar sus atributos.

Recordemos que en nuestro componente MyComponentForm a las etiqu√©tas input le agreg√°mos el atributo name y un id, cualquiera de los dos ser√°n √∫tiles para lo que queremos lograr. Algo importante, el valor de los atributos (el que elijamos utilizar) debe ser igual a las propieadades declar√°das en nuestro objeto formFields que le pasamos como argumento a useField.

```javascript
import { useState } form 'react'
export const useField = (formFields) => {

    const [form, updateForm] = useState(formFields)

    // nuestro manejador de cambios
    const handlerChange = ({ target }) => {
        updateForm({
            ...form,
            [name]: target.value
        })
    }

    return {
        form,
        handlerForm
    }
};
```

¬øNotaste lo que logramos? te lo explicar√© paso a paso,

- Hacemos uso del operador spread para por decirlo de alguna manera hacer una copia de nuestro estado,
- Luego actualizamos la propiedad correspondiente al input que esta utilizando el usuario, como el valor de nuestro atributo name en nuestros react elements son iguales, a las propiedades de nuestro estado, podemos identificar en que input esta escribiendo el usuario, mediante las llaves cuadradas hacemos selecci√≥n por "key" y reemplazamos el valor anterior por el valor actual que est√° viniendo del value del input.

Ahora volvemos a nuestro componente y usamos la funcion handlerChange para empezar a utilizar nuestra formulario.

```javascript
export function MyComponentForm() {
  const { form, handlerChange } = useField({
    user: '',
    password: '',
  });

  const { user, password } = form;

  return (
    <form>
      <input name='user' id='user' value={user} onChange={handlerChange} />
      <input
        name='password'
        id='password'
        value={password}
        onChange={handlerChange}
      />
    </form>
  );
}
```

## Felicidades tienes un custom hook

La pr√≥xima vez que necesites, gestionar formularios y no quieras instalar una librer√≠a ya tienes la soluci√≥n. Algo que me gustar√≠a aclarar, se pueden hacer mejorar, agregarle el funcion para hacer reset del formulario por ejemplo, y por m√°s que nos gustar√≠a que no fuese as√≠, puede tener problemas de performance, en formularios muy complejos, en estos casos puntuales recomiendo el uso de alguna librer√≠a especialida.

Si te ha servido, no dudes en etiquetarme en twitter, mostrandome lo genial que te la pasas programando en React.
